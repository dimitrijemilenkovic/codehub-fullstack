import { Outlet } from "react-router-dom";
import Sidebar from "./Sidebar.jsx";
import Topbar from "./Topbar.jsx";
import { useLocalStorage } from "../hooks/useLocalStorage.js";

export default function Layout() {
  const [sidebarCollapsed, setSidebarCollapsed] = useLocalStorage('sidebar_collapsed', false);

  function toggleSidebar() {
    setSidebarCollapsed(!sidebarCollapsed);
  }

  return (
    <div
      style={{
        display: "grid",
        gridTemplateColumns: sidebarCollapsed ? "80px 1fr" : "260px 1fr",
        minHeight: "100dvh",
        transition: "grid-template-columns 0.3s ease"
      }}
    >
      <Sidebar isCollapsed={sidebarCollapsed} onToggle={toggleSidebar} />
      <div style={{ display: 'flex', flexDirection: 'column' }}>
        <Topbar />
        <main className="container-page" style={{ flex: 1, overflow: 'auto' }}>
          <Outlet />
        </main>
      </div>
    </div>
  );
}
